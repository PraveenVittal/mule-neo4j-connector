<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:neo4j="http://www.mulesoft.org/schema/mule/neo4j"
    xsi:schemaLocation="
            http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
            http://www.mulesoft.org/schema/mule/neo4j http://www.mulesoft.org/schema/mule/neo4j/current/mule-neo4j.xsd">

    <neo4j:config name="neo4j" />

    <flow name="test">
        <neo4j:get-service-root />

        <neo4j:run-cypher-query>
            <neo4j:cypher-query
                query="start x  = node(0) match x -[r]-> n return type(r)" />
        </neo4j:run-cypher-query>

        <neo4j:get-node-by-id nodeId="0" failIfNotFound="true" />
        <neo4j:get-node-by-id nodeId="37800000" />

        <neo4j:create-node />
        <neo4j:create-node>
            <neo4j:properties>
                <neo4j:property key="foo">bar</neo4j:property>
            </neo4j:properties>
        </neo4j:create-node>

        <neo4j:delete-node-by-id nodeId="37800000" />
        <neo4j:delete-node-by-id nodeId="37800000"
            failIfNotFound="true" />

        <neo4j:delete-node node-ref="#[message.payload]" />
        <neo4j:delete-node node-ref="#[message.payload]"
            failIfNotFound="true" />

        <neo4j:get-relationship-by-id
            relationshipId="1" failIfNotFound="true" />

        <neo4j:get-relationship-by-id
            relationshipId="1" />

        <neo4j:create-relationship-by-ids
            fromNodeId="1" toNodeId="2" type="test" />

        <neo4j:create-relationship fromNode-ref="#[firstNode]"
            toNode-ref="#[secondNode]" type="test">
            <neo4j:properties>
                <neo4j:property key="foo">bar</neo4j:property>
            </neo4j:properties>
        </neo4j:create-relationship>

        <neo4j:delete-relationship-by-id
            relationshipId="1" failIfNotFound="true" />
        <neo4j:delete-relationship-by-id
            relationshipId="1" />

        <neo4j:delete-relationship relationship-ref="#[aRelationship]"
            failIfNotFound="true" />
        <neo4j:delete-relationship relationship-ref="#[aRelationship]" />

        <neo4j:get-node-relationships node-ref="#[aNode]"
            direction="ALL" />

        <neo4j:get-node-relationships node-ref="#[aNode]"
            direction="OUTGOING">
            <neo4j:types>
                <neo4j:type>likes</neo4j:type>
            </neo4j:types>
        </neo4j:get-node-relationships>

        <neo4j:get-node-relationships node-ref="#[aNode]"
            direction="INCOMING">
            <neo4j:types>
                <neo4j:type>loves</neo4j:type>
                <neo4j:type>hates</neo4j:type>
            </neo4j:types>
        </neo4j:get-node-relationships>

        <neo4j:set-relationship-property
            relationship-ref="#[aRelationship]" key="pi" value-ref="#[Math.PI]" />

        <neo4j:set-relationship-properties
            relationship-ref="#[aRelationship]">
            <neo4j:properties>
                <neo4j:property key="pi" value-ref="#[Math.PI]" />
                <neo4j:property key="chords">EADGBE</neo4j:property>
            </neo4j:properties>
        </neo4j:set-relationship-properties>
    </flow>
</mule>